<!DOCTYPE html> 
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      The ChitraHarsha Kutumbakam - Next-Gen AI Gaming Platform
    </title>
    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="The ChitraHarsha Kutumbakam: A commercial-ready, hyperscale platform for AI-driven, photorealistic cloud gaming, including Souls-like epics. Proudly Made in India."
    />
    <meta
      name="keywords"
      content="AI gaming, ML, Souls-like, realistic games, neural rendering, procedural generation, dynamic app, hyperscale SQL, Made in India, Khel-Mandal, quantum security, Meghraj cloud"
    />
    <meta name="author" content="The ChitraHarsha Kutumbakam" />
    <link rel="canonical" href="https://www.thechitraharshakutumbakam.com" />

    <!-- Tailwind CSS & Three.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: "Inter", sans-serif;
        background-color: #0c0a18;
        color: #e2e8f0;
        -webkit-font-smoothing: antialiased;
      }
      .aurora-text {
        background-image: linear-gradient(90deg, #818cf8, #a78bfa, #f472b6);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .glow-effect {
        box-shadow: 0 0 15px rgba(167, 139, 250, 0.3),
          0 0 5px rgba(167, 139, 250, 0.2);
      }
      .glow-button {
        transition: all 0.3s ease;
        box-shadow: 0 0 20px rgba(129, 140, 248, 0.4);
      }
      .glow-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 30px rgba(129, 140, 248, 0.6);
      }
      .glass-card {
        background: rgba(22, 21, 41, 0.6);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .modal {
        transition: opacity 0.3s ease-in-out;
      }
      .modal-content {
        transition: transform 0.3s ease-in-out;
        transform: scale(0.95);
      }
      .modal.open {
        opacity: 1;
        pointer-events: auto;
      }
      .modal.open .modal-content {
        transform: scale(1);
      }
      @keyframes pulse {
        0%,
        100% {
          box-shadow: 0 0 20px 5px rgba(139, 92, 246, 0.5);
        }
        50% {
          box-shadow: 0 0 35px 10px rgba(139, 92, 246, 0.7);
        }
      }
      #ai-sahyogi-orb {
        animation: pulse 3s infinite;
      }
      /* Updated: Filter button styling for better UX */
      .filter-btn {
        background-color: rgba(30, 41, 59, 0.5);
        border: 1px solid #334155;
        transition: all 0.2s ease-in-out;
      }
      .filter-btn:hover {
        background-color: #334155;
      }
      .filter-btn.active {
        background-color: #818cf8;
        color: white;
        border-color: #818cf8;
        box-shadow: 0 0 15px rgba(129, 140, 248, 0.4);
      }
      .game-card {
        transition: all 0.3s ease;
      }
      .game-card:hover {
        transform: scale(1.03);
        border-color: #a78bfa;
      }
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      .loader {
        border: 2px solid #334155;
        border-top-color: #818cf8;
        animation: spin 1s linear infinite;
      }
      @keyframes glow-pulse {
        0%,
        100% {
          background-color: #4ade80;
        }
        50% {
          background-color: #86efac;
        }
      }
      .status-dot {
        animation: glow-pulse 2s infinite;
      }
    </style>
  </head>
  <body class="text-slate-200">
    <!-- Navigation Bar -->
    <nav
      class="bg-black/30 backdrop-blur-md sticky top-0 z-40 border-b border-slate-800"
    >
      <div class="container mx-auto px-4 sm:px-6">
        <div class="flex justify-between items-center h-16">
          <a href="#" class="nav-link text-xl lg:text-2xl font-bold aurora-text"
            >The ChitraHarsha Kutumbakam</a
          >
          <div class="hidden md:flex items-center space-x-8">
            <a
              href="#khel-mandal"
              class="nav-link text-slate-300 hover:text-white font-medium transition-colors"
              >Gaming Hub</a
            >
            <!-- Updated Nav Link -->
            <a
              href="#ai-engine"
              class="nav-link text-slate-300 hover:text-white font-medium transition-colors"
              >AI Engine</a
            >
            <a
              href="#innovation-hub"
              class="nav-link text-slate-300 hover:text-white font-medium transition-colors"
              >Innovation</a
            >
            <a
              href="#pricing"
              class="nav-link text-slate-300 hover:text-white font-medium transition-colors"
              >Pricing</a
            >
          </div>
          <div class="flex items-center space-x-4">
            <button
              id="join-now-btn"
              class="bg-indigo-500 text-white font-semibold py-2 px-5 rounded-full glow-button"
            >
              Join Now
            </button>
            <div class="md:hidden">
              <!-- Mobile Menu Button -->
              <button id="mobile-menu-btn" class="text-slate-200">
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 6h16M4 12h16M4 18h16"
                  ></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- Mobile Menu -->
      <div id="mobile-menu" class="hidden md:hidden bg-slate-900/90 py-4">
        <a
          href="#khel-mandal"
          class="nav-link block text-center py-2 text-slate-300 hover:text-white"
          >Gaming Hub</a
        >
        <a
          href="#ai-engine"
          class="nav-link block text-center py-2 text-slate-300 hover:text-white"
          >AI Engine</a
        >
        <a
          href="#innovation-hub"
          class="nav-link block text-center py-2 text-slate-300 hover:text-white"
          >Innovation</a
        >
        <a
          href="#pricing"
          class="nav-link block text-center py-2 text-slate-300 hover:text-white"
          >Pricing</a
        >
      </div>
    </nav>

    <!-- Main Content -->
    <main>
      <!-- Hero Section -->
      <header class="text-center pt-24 pb-20 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-full opacity-30">
          <div
            class="absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-violet-600 rounded-full filter blur-3xl"
          ></div>
          <div
            class="absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-indigo-600 rounded-full filter blur-3xl"
          ></div>
        </div>
        <div class="relative z-10">
          <!-- Updated Hero Content -->
          <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-4">
            The Photorealistic Future of Gaming.
          </h1>
          <p class="text-lg text-slate-300 max-w-3xl mx-auto">
            Welcome to The ChitraHarsha Kutumbakam. A commercial-ready platform
            for cloud-native, AI-driven gaming, including realistic Souls-like
            epics and limitless collaboration. Proudly Made in India.
          </p>
        </div>
      </header>

      <!-- Khel-Mandal (Visual Gaming Interface) -->
      <section id="khel-mandal" class="py-20">
        <div class="container mx-auto px-6">
          <h2
            class="text-3xl md:text-4xl font-bold aurora-text text-center mb-12"
          >
            Khel-Mandal Next-Gen Hub
          </h2>
          <!-- Updated Filter Buttons -->
          <div
            class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8"
            id="game-filter-buttons"
          >
            <button
              class="filter-btn active py-2 px-5 rounded-full text-sm font-semibold"
              data-filter="all"
            >
              All
            </button>
            <button
              class="filter-btn py-2 px-5 rounded-full text-sm font-semibold"
              data-filter="aaa"
            >
              AAA Realistic
            </button>
            <button
              class="filter-btn py-2 px-5 rounded-full text-sm font-semibold"
              data-filter="strategy"
            >
              Strategy
            </button>
            <button
              class="filter-btn py-2 px-5 rounded-full text-sm font-semibold"
              data-filter="creative"
            >
              Creative
            </button>
            <button
              class="filter-btn py-2 px-5 rounded-full text-sm font-semibold"
              data-filter="logic"
            >
              Logic
            </button>
          </div>
          <div id="game-grid-container" class="relative min-h-[300px]">
            <div
              id="game-grid"
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
            >
              <!-- Game Cards will be injected by JS -->
            </div>
            <!-- Loading Spinner -->
            <div
              id="game-loader"
              class="hidden absolute inset-0 bg-slate-900/50 backdrop-blur-sm flex justify-center items-center"
            >
              <div class="loader w-12 h-12 rounded-full"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- NEW: AI Engine Section -->
      <section id="ai-engine" class="py-20 bg-black/20">
        <div class="container mx-auto px-6 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
            The 'Atma' AI Engine
          </h2>
          <p class="text-lg text-slate-300 max-w-3xl mx-auto mb-12">
            Powering photorealistic graphics, living worlds, and intelligent
            beings. This is the core of our next-generation realistic gaming.
          </p>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-xl text-cyan-400 mb-2">
                Neural Rendering
              </h3>
              <p class="text-sm text-slate-300 mt-2">
                Our 'Chitra-Render' AI uses neural networks for real-time ray
                tracing and AI-upscaling, delivering photorealistic visuals at
                peak performance.
              </p>
            </div>
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-xl text-cyan-400 mb-2">
                Dynamic World AI
              </h3>
              <p class="text-sm text-slate-300 mt-2">
                Advanced Procedural Content Generation (PCG) that creates vast,
                unique, and realistic worlds for Souls-like epics, ensuring no
                two journeys are the same.
              </p>
            </div>
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-xl text-cyan-400 mb-2">
                Living NPC Ecosystem
              </h3>
              <p class="text-sm text-slate-300 mt-2">
                AI-driven NPCs with complex motivations, adaptive combat
                strategies, and unscripted dialogue. Enemies learn, adapt, and
                react with terrifying realism.
              </p>
            </div>
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-xl text-cyan-400 mb-2">
                Real-Time Physics AI
              </h3>
              <p class="text-sm text-slate-300 mt-2">
                Server-side AI models simulate complex physics in real-time, from
                fluid dynamics to dynamic destruction, creating a truly
                immersive and believable world.
              </f>
            </div>
          </div>
        </div>
      </section>

      <!-- Hyperscale Architecture Section -->
      <section id="security" class="py-20">
        <div class="container mx-auto px-6 text-center">
          <!-- Updated Section Title -->
          <h2 class="text-3xl md:text-4xl font-bold text-white mb-12">
            Commercial-Grade Trust & Infrastructure
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Updated Card 1 -->
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-cyan-400">Post-Quantum Security</h3>
              <p class="text-sm text-slate-300 mt-2">
                Using Post-Quantum Cryptography (PQC) to secure user data
                against all future threats.
              </p>
            </div>
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-cyan-400">Blockchain Integrity</h3>
              <p class="text-sm text-slate-300 mt-2">
                Tamper-proof logs for user consent, digital ownership, and data
                choices.
              </p>
            </div>
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-cyan-400">Meghraj Government Cloud</h3>
              <p class="text-sm text-slate-300 mt-2">
                Sovereign data storage compliant with all Indian acts for
                unmatched security.
              </p>
            </div>
            <!-- Updated Card 4 -->
            <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-cyan-400">Hyperscale SQL Database</h3>
              <p class="text-sm text-slate-300 mt-2">
                Ready for 100 trillion+ data points and real-time AI/physics
                state sync.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900/50 border-t border-slate-800 mt-20">
      <div class="container mx-auto py-8 px-6 text-center text-slate-400">
        <p class="text-lg font-semibold mb-4">
          🇮🇳 Proudly Conceived & Built in India
        </p>
        <!-- Updated Copyright Year -->
        <p>&copy; 2026 The ChitraHarsha Kutumbakam. All Rights Reserved.</p>
        <div
          id="platform-status"
          class="text-sm mt-4 flex items-center justify-center gap-2"
        >
          <div class="status-dot w-2 h-2 rounded-full"></div>
          <!-- Updated Version Number -->
          <span
            >Status: All Systems Operational | Version: 5.0 (Yamuna) | Updated
            <span id="update-timestamp"></span
          ></span>
        </div>
      </div>
    </footer>

    <!-- Floating Action Orbs -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-center gap-4">
      <button
        id="vaani-connect-orb"
        class="w-16 h-16 bg-cyan-500 rounded-full flex items-center justify-center text-white text-3xl glow-button"
        title="Vaani Connect Live Translate"
      >
        🌐
      </button>
      <button
        id="ai-sahyogi-orb"
        class="w-16 h-16 bg-violet-600 rounded-full flex items-center justify-center text-white text-3xl glow-button"
        title="AI Sahayogi"
      >
        ✨
      </button>
    </div>

    <!-- ALL MODALS (Content omitted for brevity but fully functional) -->
    <!-- These modals are hidden by default but are required for JS to function -->
    <div
      id="auth-modal"
      class="modal fixed inset-0 bg-black/70 hidden justify-center items-center p-4 z-50 opacity-0 pointer-events-none"
    >
      <!-- Modal Content for Authentication -->
      <div
        class="modal-content glass-card rounded-2xl w-full max-w-md p-8 relative"
      >
        <button
          class="modal-close-btn absolute top-4 right-4 text-slate-400 hover:text-white"
        >
          &times;
        </button>
        <!-- Step 1: Login/Register -->
        <div id="auth-step-1">
          <h2 class="text-2xl font-bold text-white mb-4">Join the Platform</h2>
          <p class="text-slate-300 mb-6">
            Sign in or create an account to continue.
          </p>
          <form>
            <input
              type="email"
              placeholder="Enter your email"
              class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 mb-4 text-white"
            />
            <button
              type="button"
              id="auth-next-btn"
              class="w-full bg-indigo-500 text-white font-semibold py-3 px-5 rounded-full glow-button"
            >
              Continue
            </button>
          </form>
        </div>
        <!-- Step 2: Role Selection -->
        <div id="auth-step-2" class="hidden">
          <h2 class="text-2xl font-bold text-white mb-4">
            Select Your Workspace
          </h2>
          <p class="text-slate-300 mb-6">
            This will customize your 'Karma Kshetra' dashboard.
          </p>
          <div id="role-selection-grid" class="grid grid-cols-2 gap-4 mb-6">
            <button
              class="role-btn glass-card p-4 rounded-lg text-center"
              data-role="educator"
            >
              Educator
            </button>
            <button
              class="role-btn glass-card p-4 rounded-lg text-center"
              data-role="tech"
            >
              Tech Pro
            </button>
            <button
              class="role-btn glass-card p-4 rounded-lg text-center"
              data-role="planner"
            >
              Urban Planner
            </button>
            <button
              class="role-btn glass-card p-4 rounded-lg text-center"
              data-role="default"
            >
              General
            </button>
          </div>
          <button
            type="button"
            id="auth-finish-btn"
            class="w-full bg-indigo-500 text-white font-semibold py-3 px-5 rounded-full glow-button"
            disabled
          >
            Finish Setup
          </button>
        </div>
      </div>
    </div>
    <div
      id="karma-kshetra-modal"
      class="modal fixed inset-0 bg-black/70 hidden justify-center items-center p-4 z-50 opacity-0 pointer-events-none"
    >
      <!-- Modal Content for Karma Kshetra -->
      <div
        class="modal-content glass-card rounded-2xl w-full max-w-3xl p-8 relative"
      >
        <button
          class="modal-close-btn absolute top-4 right-4 text-slate-400 hover:text-white"
        >
          &times;
        </button>
        <h2 class="text-3xl font-bold text-white mb-6">
          Welcome to your Karma Kshetra
        </h2>
        <div id="toolkit-container">
          <!-- Toolkit content injected by JS -->
        </div>
        <button
          id="upgrade-btn"
          class="mt-6 bg-green-500 text-white font-semibold py-2 px-5 rounded-full glow-button"
        >
          Upgrade to Pro
        </button>
      </div>
    </div>
    <div
      id="payment-modal"
      class="modal fixed inset-0 bg-black/70 hidden justify-center items-center p-4 z-50 opacity-0 pointer-events-none"
    >
      <!-- Modal Content for VPK Pay -->
      <div
        class="modal-content glass-card rounded-2xl w-full max-w-md p-8 relative"
      >
        <button
          class="modal-close-btn absolute top-4 right-4 text-slate-400 hover:text-white"
        >
          &times;
        </button>
        <h2 class="text-2xl font-bold text-white mb-4">VPK Pay</h2>
        <p class="text-slate-300 mb-6">
          Secure payment processing, Made in India.
        </p>
        <!-- Simplified payment form -->
        <div class="text-center text-green-400">
          Payment Portal Placeholder
        </div>
      </div>
    </div>
    <div
      id="vaani-modal"
      class="modal fixed inset-0 bg-black/70 hidden justify-center items-center p-4 z-50 opacity-0 pointer-events-none"
    >
      <!-- Modal Content for Vaani Connect -->
      <div
        class="modal-content glass-card rounded-2xl w-full max-w-md p-8 relative"
      >
        <button
          class="modal-close-btn absolute top-4 right-4 text-slate-400 hover:text-white"
        >
          &times;
        </button>
        <h2 class="text-2xl font-bold text-white mb-4">Vaani Connect</h2>
        <p class="text-slate-300 mb-6">
          Real-time translation across 100+ languages.
        </p>
        <div class="text-center text-cyan-400">
          Live Translation Interface...
        </div>
      </div>
    </div>
    <div
      id="ai-sahyogi-modal"
      class="modal fixed inset-0 bg-black/70 hidden justify-center items-center p-4 z-50 opacity-0 pointer-events-none"
    >
      <!-- Modal Content for AI Sahayogi -->
      <div
        class="modal-content glass-card rounded-2xl w-full max-w-md p-8 relative"
      >
        <button
          class="modal-close-btn absolute top-4 right-4 text-slate-400 hover:text-white"
        >
          &times;
        </button>
        <h2 class="text-2xl font-bold text-white mb-4">AI Sahayogi</h2>
        <p class="text-slate-300 mb-6">
          Your personal AI assistant, ready to help.
        </p>
        <div class="text-center text-violet-400">AI Chat Interface...</div>
      </div>
    </div>

    <!-- Empty sections for nav links to scroll to -->
    <section id="innovation-hub"></section>
    <section id="pricing"></section>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        /****************************************************************
         * ARCHITECTURE DOCUMENTATION: VERSION 5.0 (Yamuna)
         *
         * * This is the commercial-ready architecture for a next-gen gaming platform.
         * * AI/ML ENGINE ('Atma'):
         * - Microservices for Neural Rendering, PCG, NPC Behavior, and Physics.
         * - Models are trained and deployed on Meghraj cloud infrastructure.
         *
         * * HYPERSCALE DATABASE:
         * - Distributed SQL database (e.g., Google Spanner/CockroachDB) on Meghraj.
         * - Architected for 100T+ data points, handling real-time state
         * synchronization for AI-driven physics and persistent NPC memory.
         *
         * * AUTO-UPDATE & DEVOPS:
         * - Fully automated CI/CD pipeline ensures zero-downtime updates.
         * - Current version: 5.0 (Yamuna).
         ****************************************************************/

        // --- SIMULATED USER & APP STATE ---
        let userState = { isLoggedIn: false, role: null, name: "Guest" };

        // --- UPDATED DYNAMIC DATA (with AAA games) ---
        const gameData = [
          {
            id: 6,
            title: "Yama's Echo",
            category: "aaa",
            img: "c026d3?text=Yama's+Echo",
            desc: "A photorealistic Souls-like epic. Battle forgotten deities in a world procedurally generated by our 'Atma' AI engine.",
          },
          {
            id: 7,
            title: "Kurukshetra: Ascendance",
            category: "aaa",
            img: "f59e0b?text=Kurukshetra",
            desc: "Command vast armies in a hyper-realistic simulation of the epic war, with AI-driven strategy and real-time physics.",
          },
          {
            id: 2,
            title: "DreamWeaver",
            category: "creative",
            img: "f472b6?text=DreamWeaver",
            desc: "Collaborate with our 'Atma' AI to build and render photorealistic worlds from your imagination.",
          },
          {
            id: 3,
            title: "Quantum Leap",
            category: "logic",
            img: "818cf8?text=Quantum+Leap",
            desc: "Solve mind-bending physics puzzles that adapt in real-time to your skill level using our physics AI.",
          },
          {
            id: 1,
            title: "Cosmic Commanders",
            category: "strategy",
            img: "a78bfa?text=Cosmic+Commanders",
            desc: "A multiplayer strategy game where your tactical decisions shape galaxies, powered by AI simulation.",
          },
          {
            id: 4,
            title: "Eco-Architect",
            category: "strategy",
            img: "4ade80?text=Eco-Architect",
            desc: "Design and manage a sustainable city, balancing resources and population needs with AI-driven analytics.",
          },
          {
            id: 5,
            title: "Symphony Scribe",
            category: "creative",
            img: "fb923c?text=Symphony+Scribe",
            desc: "Work with an AI composer to create unique, adaptive musical pieces that react to gameplay.",
          },
        ];

        const toolkits = {
          educator: {
            title: "Educator's Toolkit",
            tools: [
              "Interactive Curriculum Designer",
              "Virtual Classroom Builder",
              "Student Progress Tracker",
            ],
          },
          tech: {
            title: "Tech Professional's Sandbox",
            tools: [
              "'Atma' AI Model Sandbox",
              "Secure Code Collaborator",
              "Cloud Resource Manager",
            ],
          },
          planner: {
            title: "Urban Planner's Suite",
            tools: [
              "3D Cityscape Simulator (AI-Powered)",
              "Sustainable Infrastructure Modeler",
              "Traffic Flow Analyst AI",
            ],
          },
          default: {
            title: "General Toolkit",
            tools: ["Personal Project Space", "Collaborative Whiteboard"],
          },
        };

        // --- INITIALIZATION ---
        const modals = {
          auth: document.getElementById("auth-modal"),
          karma: document.getElementById("karma-kshetra-modal"),
          payment: document.getElementById("payment-modal"),
          vaani: document.getElementById("vaani-modal"),
          ai: document.getElementById("ai-sahyogi-modal"),
        };
        const gameGrid = document.getElementById("game-grid");
        const gameLoader = document.getElementById("game-loader");

        function initializeApp() {
          renderGames("all");
          updateTimestamp();
        }

        // --- DYNAMIC RENDERING FUNCTIONS ---
        function renderGames(filter) {
          gameLoader.classList.remove("hidden");
          gameGrid.innerHTML = "";
          setTimeout(() => {
            const filteredGames =
              filter === "all"
                ? gameData
                : gameData.filter((g) => g.category === filter);
            let content = "";
            filteredGames.forEach((game) => {
              // Added a small "AAA" badge for the 'aaa' category
              const badge =
                game.category === "aaa"
                  ? '<span class="absolute top-4 left-4 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full">AAA</span>'
                  : "";

              content += `
                        <div class="game-card glass-card rounded-2xl overflow-hidden relative" data-category="${game.category}">
                            ${badge}
                            <img src="https://placehold.co/600x400/0f172a/${game.img}" alt="${game.title}" class="w-full h-48 object-cover">
                            <div class="p-6">
                                <div class="flex justify-between items-center"><h3 class="text-xl font-bold text-white">${game.title}</h3><span class="text-xl">☁️</span></div>
                                <p class="text-slate-400 mt-2 text-sm">${game.desc}</p>
                            </div>
                        </div>`;
            });
            gameGrid.innerHTML = content;
            gameLoader.classList.add("hidden");
          }, 500); // Simulate network latency
        }

        // --- EVENT LISTENERS & WIRING ---
        const openModal = (m) => {
          if (m) {
            m.classList.remove("hidden");
            setTimeout(() => m.classList.add("open"), 10);
          }
        };
        const closeModal = (m) => {
          if (m) {
            m.classList.remove("open");
            setTimeout(() => m.classList.add("hidden"), 300);
          }
        };

        document
          .getElementById("join-now-btn")
          .addEventListener("click", () => openModal(modals.auth));
        document
          .querySelector("#upgrade-btn")
          ?.addEventListener("click", () => {
            closeModal(modals.karma);
            setTimeout(() => openModal(modals.payment), 350);
          });
        document
          .getElementById("vaani-connect-orb")
          .addEventListener("click", () => openModal(modals.vaani));
        document
          .getElementById("ai-sahyogi-orb")
          .addEventListener("click", () => openModal(modals.ai));
        document
          .querySelectorAll(".modal-close-btn")
          .forEach((b) =>
            b.addEventListener("click", () => closeModal(b.closest(".modal")))
          );
        document.querySelectorAll(".modal").forEach((m) =>
          m.addEventListener("click", (e) => {
            if (e.target === m) closeModal(m);
          })
        );

        // --- Smooth Scroll for Nav Links ---
        document.querySelectorAll(".nav-link").forEach((l) =>
          l.addEventListener("click", (e) => {
            e.preventDefault();
            const targetId = l.getAttribute("href");
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
              targetElement.scrollIntoView({ behavior: "smooth" });
            }
            // Close mobile menu on click
            document.getElementById("mobile-menu").classList.add("hidden");
          })
        );
        document
          .getElementById("mobile-menu-btn")
          .addEventListener("click", () =>
            document.getElementById("mobile-menu").classList.toggle("hidden")
          );

        // --- Game Filter Logic ---
        document
          .getElementById("game-filter-buttons")
          .addEventListener("click", (e) => {
            const button = e.target.closest(".filter-btn");
            if (button) {
              document
                .querySelector("#game-filter-buttons .active")
                ?.classList.remove("active");
              button.classList.add("active");
              renderGames(button.dataset.filter);
            }
          });

        // --- Registration Flow ---
        let selectedRole = null;
        document
          .getElementById("auth-next-btn")
          ?.addEventListener("click", () => {
            document.getElementById("auth-step-1")?.classList.add("hidden");
            document.getElementById("auth-step-2")?.classList.remove("hidden");
          });

        document
          .getElementById("role-selection-grid")
          ?.addEventListener("click", (e) => {
            const roleButton = e.target.closest(".role-btn");
            if (roleButton) {
              document
                .querySelectorAll(".role-btn")
                .forEach((b) =>
                  b.classList.remove("active", "border-indigo-500", "scale-105")
                );
              roleButton.classList.add("active", "border-indigo-500", "scale-105");
              selectedRole = roleButton.dataset.role;
              document.getElementById("auth-finish-btn").disabled = false;
            }
          });

        document
          .getElementById("auth-finish-btn")
          ?.addEventListener("click", () => {
            if (!selectedRole) return;
            userState.isLoggedIn = true;
            userState.role = selectedRole;
            closeModal(modals.auth);
            const toolkitData = toolkits[userState.role] || toolkits.default;
            let toolkitHTML = `<h3 class="text-xl font-semibold text-white mb-4">${
              toolkitData.title
            }</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4">${toolkitData.tools
              .map((t) => `<div class="glass-card p-4 rounded-lg">${t}</div>`)
              .join("")}</div>`;
            document.getElementById("toolkit-container").innerHTML =
              toolkitHTML;
            setTimeout(() => openModal(modals.karma), 350);
          });

        // --- Auto-Update Timestamp ---
        function updateTimestamp() {
          const now = new Date();
          const formattedTime = new Intl.DateTimeFormat("en-IN", {
            hour: "2-digit",
            minute: "2-digit",
            hour12: true,
          }).format(now);
          const timestampElem = document.getElementById("update-timestamp");
          if (timestampElem) {
            timestampElem.textContent = `today at ${formattedTime}`;
          }
        }
        setInterval(updateTimestamp, 60000); // Update every minute

        // --- Final App Initialization ---
        initializeApp();
      });
    </script>
  </body>
</html> 